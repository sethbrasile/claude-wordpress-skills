---
phase: 01-security-review
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - commands/wp-sec-review.md
  - commands/wp-sec.md
autonomous: true

must_haves:
  truths:
    - "User can invoke /wp-sec-review to get comprehensive security review using full skill workflow"
    - "User can invoke /wp-sec to get quick grep-based security triage"
    - "Command files follow exact same pattern as existing wp-perf-review.md and wp-perf.md"
  artifacts:
    - path: "commands/wp-sec-review.md"
      provides: "Full security review slash command"
      min_lines: 8
      contains: "wp-security-review"
    - path: "commands/wp-sec.md"
      provides: "Quick security scan slash command"
      min_lines: 8
      contains: "Search Patterns for Quick Detection"
  key_links:
    - from: "commands/wp-sec-review.md"
      to: "skills/wp-security-review/SKILL.md"
      via: "References skill name for full workflow"
      pattern: "wp-security-review"
    - from: "commands/wp-sec.md"
      to: "skills/wp-security-review/SKILL.md"
      via: "References Search Patterns section for grep commands"
      pattern: "Search Patterns for Quick Detection"
---

<objective>
Create the two slash commands for the security review skill — /wp-sec-review (full review) and /wp-sec (quick scan).

Purpose: Slash commands are the user-facing entry points. They delegate to the SKILL.md workflow (full review) or grep patterns (quick scan), matching the exact pattern established by the performance skill's /wp-perf-review and /wp-perf commands.

Output: 2 markdown files in `commands/` (~10-12 lines each).
</objective>

<execution_context>
@/Users/seth/.claude/get-shit-done/workflows/execute-plan.md
@/Users/seth/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@commands/wp-perf-review.md
@commands/wp-perf.md
@.planning/phases/01-security-review/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create /wp-sec-review and /wp-sec slash commands</name>
  <files>
    commands/wp-sec-review.md
    commands/wp-sec.md
  </files>
  <action>
Create both slash command files by following the EXACT pattern of the existing performance skill commands (`commands/wp-perf-review.md` and `commands/wp-perf.md`). These are simple delegation files.

**File 1: commands/wp-sec-review.md (SEC-28)**

Mirror `commands/wp-perf-review.md` exactly, replacing performance references with security:

```markdown
---
description: WordPress security code review - detects XSS, SQL injection, CSRF, authorization bypass, file upload vulnerabilities, and dangerous function usage
argument-hint: [file-or-directory]
---

Use and follow the **wp-security-review** skill to perform a comprehensive WordPress security code review.

**Target**: $ARGUMENTS (if empty, use current working directory)

Execute the full Code Review Workflow from the skill, load reference files as needed for deeper analysis, and format output using the skill's Output Format section with severity levels (Critical/Warning/Info) and CWE references.
```

**File 2: commands/wp-sec.md (SEC-29)**

Mirror `commands/wp-perf.md` exactly, replacing performance references with security:

```markdown
---
description: Quick WordPress security scan - fast triage using high-risk pattern detection
argument-hint: [path]
---

Use the **wp-security-review** skill to perform a quick security triage scan.

**Target**: $ARGUMENTS (if empty, use current working directory)

Focus only on the "Search Patterns for Quick Detection" section—run the grep commands to find high-risk security patterns fast. Report matches with file:line references and severity levels. Skip deep analysis.

If critical issues are found, suggest running `/wp-sec-review` for comprehensive analysis with CWE references and fix recommendations.
```

**Key differences from performance commands:**
- Description references security vulnerabilities instead of performance issues
- wp-sec-review mentions CWE references in the instruction
- wp-sec suggests /wp-sec-review (not /wp-perf-review) for follow-up
- Otherwise identical structure and delegation pattern
  </action>
  <verify>
- `commands/wp-sec-review.md` exists with valid YAML frontmatter (description, argument-hint)
- `commands/wp-sec.md` exists with valid YAML frontmatter (description, argument-hint)
- wp-sec-review.md references `wp-security-review` skill by name
- wp-sec-review.md mentions "Code Review Workflow" and "Output Format"
- wp-sec.md references "Search Patterns for Quick Detection" section
- wp-sec.md suggests `/wp-sec-review` for deeper analysis
- Both files follow the exact pattern of their performance counterparts
  </verify>
  <done>
/wp-sec-review command delegates to wp-security-review skill's full Code Review Workflow with CWE references. /wp-sec command delegates to Search Patterns for Quick Detection section for grep-based triage. Both match the established slash command pattern from the performance skill.
  </done>
</task>

</tasks>

<verification>
- Both command files exist in `commands/` directory
- YAML frontmatter is valid in both files
- wp-sec-review.md references the correct skill name and workflow
- wp-sec.md references the correct grep patterns section
- Pattern matches existing wp-perf-review.md and wp-perf.md exactly (just different content)
</verification>

<success_criteria>
- User can invoke /wp-sec-review to trigger full security review workflow
- User can invoke /wp-sec to trigger quick grep-based security scan
- Commands are discoverable via Claude Code's slash command interface
- Commands delegate correctly to SKILL.md sections
</success_criteria>

<output>
After completion, create `.planning/phases/01-security-review/01-03-SUMMARY.md`
</output>
